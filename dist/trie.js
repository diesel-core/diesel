var K=Object.create;var{getPrototypeOf:L,defineProperty:G,getOwnPropertyNames:O}=Object;var P=Object.prototype.hasOwnProperty;var Q=(q,v,j)=>{j=q!=null?K(L(q)):{};let A=v||!q||!q.__esModule?G(j,"default",{value:q,enumerable:!0}):j;for(let w of O(q))if(!P.call(A,w))G(A,w,{get:()=>q[w],enumerable:!0});return A};var R=((q)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(q,{get:(v,j)=>(typeof require!=="undefined"?require:v)[j]}):q)(function(q){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+q+'" is not supported')});class E{children;isEndOfWord;handler;isDynamic;pattern;path;method;constructor(){this.children={},this.isEndOfWord=!1,this.handler=[],this.isDynamic=!1,this.pattern="",this.path="",this.method=[]}}class H{root;constructor(){this.root=new E}insert(q,v){let j=this.root,A=q.split("/").filter(Boolean);if(q==="/"){j.isEndOfWord=!0,j.handler.push(v.handler),j.path=q,j.method.push(v.method);return}for(let w of A){let B=!1,z=w;if(w.startsWith(":"))B=!0,z=":";if(!j.children[z])j.children[z]=new E;j=j.children[z],j.isDynamic=B,j.pattern=w,j.method.push(v.method),j.handler.push(v.handler),j.path=q}j.isEndOfWord=!0,j.method.push(v.method),j.handler.push(v.handler),j.path=q}search(q,v){let j=this.root,A=q.split("/").filter(Boolean),w=A.length;for(let J of A){let F=J;if(!j.children[F])if(j.children[":"])j=j.children[":"];else return null;else j=j.children[F]}let B=j.path.split("/").filter(Boolean);if(w!==B.length)return null;let z=j.method.indexOf(v);if(z!==-1)return{path:j.path,handler:j.handler[z],isDynamic:j.isDynamic,pattern:j.pattern,method:j.method[z]};return{path:j.path,handler:j.handler,isDynamic:j.isDynamic,pattern:j.pattern,method:j.method[z]}}}export{H as default};
