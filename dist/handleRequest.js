var B=(F,G)=>()=>(G||F((G={exports:{}}).exports,G),G.exports);var D=B((V)=>{function A(F,G){let z={},J={},X=!1,I=null,U=null,K=null,$,Y=200;return{req:F,url:G,next:()=>{},status(E){return Y=E,this},body(){return O(this,void 0,void 0,function*(){if(!$)$=yield H(F);if($.error)return new Response(JSON.stringify({error:$.error}),{status:400,headers:{"Content-Type":"application/json"}});return $})},setHeader(E,L){return z[E]=L,this},set(E,L){return J[E]=L,this},get(E){return J[E]||null},setAuth(E){return X=E,this},getAuth(){return X},text(E,L){if(L)Y=L;return new Response(E,{status:Y,headers:z})},json(E,L){if(L)Y=L;return new Response(JSON.stringify(E),{status:Y,headers:Object.assign({"Content-Type":"application/json"},z)})},html(E,L){if(L)Y=L;return new Response(Bun.file(E),{status:Y,headers:Object.assign({},z)})},file(E,L){if(L)Y=L;return new Response(Bun.file(E),{status:Y,headers:Object.assign({},z)})},redirect(E,L){if(L)Y=L;return new Response(null,{status:Y,headers:Object.assign({Location:E},z)})},getParams(E){if(!K)K=f(F===null||F===void 0?void 0:F.routePattern,G===null||G===void 0?void 0:G.pathname);return E?K[E]||null:K},getQuery(E){if(!I)I=Object.fromEntries(G.searchParams);return E?I[E]||null:I},cookie(E,L){return O(this,arguments,void 0,function*(R,b,Z={}){let M=`${encodeURIComponent(R)}=${encodeURIComponent(b)}`;if(Z.maxAge)M+=`; Max-Age=${Z.maxAge}`;if(Z.expires)M+=`; Expires=${Z.expires.toUTCString()}`;if(Z.path)M+=`; Path=${Z.path}`;if(Z.domain)M+=`; Domain=${Z.domain}`;if(Z.secure)M+="; Secure";if(Z.httpOnly)M+="; HttpOnly";if(Z.sameSite)M+=`; SameSite=${Z.sameSite}`;if(z["Set-Cookie"]){const T=Array.isArray(z["Set-Cookie"])?z["Set-Cookie"]:[z["Set-Cookie"]];T.push(M),z["Set-Cookie"]=T}else z["Set-Cookie"]=M;return this})},getCookie(E){return O(this,void 0,void 0,function*(){if(!U){const L=F.headers.get("cookie");if(L)U=yield C(L)}return E?U[E]||null:U})}}}function C(F){return O(this,void 0,void 0,function*(){const G={};if(!F)return G;return F.split(";").forEach((J)=>{var X;const[I,U]=(X=J===null||J===void 0?void 0:J.trim())===null||X===void 0?void 0:X.split("=");if(I&&U)G[I.trim()]=U.split(" ")[0].trim()}),G})}function f(F,G){const z={},J=F.split("/"),[X]=G.split("?"),I=X.split("/");if(J.length!==I.length)return null;return J.forEach((U,K)=>{if(U.startsWith(":")){const $=U.slice(1);z[$]=I[K]}}),z}function H(F){return O(this,void 0,void 0,function*(){const G=F.headers.get("Content-Type")||"";if(!G)return{};try{if(G.startsWith("application/json"))return yield F.json();if(G.startsWith("application/x-www-form-urlencoded")){const z=yield F.text();return Object.fromEntries(new URLSearchParams(z))}if(G.startsWith("multipart/form-data")){const z=yield F.formData();return j(z)}return{error:"Unknown request body type"}}catch(z){return{error:"Invalid request body format"}}})}function j(F){const G={};for(let[z,J]of F.entries())G[z]=J;return G}var O=V&&V.__awaiter||function(F,G,z,J){function X(I){return I instanceof z?I:new z(function(U){U(I)})}return new(z||(z=Promise))(function(I,U){function K(E){try{Y(J.next(E))}catch(L){U(L)}}function $(E){try{Y(J.throw(E))}catch(L){U(L)}}function Y(E){E.done?I(E.value):X(E.value).then(K,$)}Y((J=J.apply(F,G||[])).next())})};Object.defineProperty(V,"__esModule",{value:!0});V.default=A});var S=B((W)=>{function P(F,G,z){return N(this,void 0,void 0,function*(){const J=_.default(F,G);if(z.hasOnReqHook)yield z.hooks.onRequest(J);if(z.hasMiddleware){const I=[...z.globalMiddlewares,...z.middlewares.get(G.pathname)||[]],U=yield y(I,J);if(U)return U}let X;if(Q[G.pathname+F.method])X=Q[G.pathname+F.method];else X=z.trie.search(G.pathname,F.method),Q[G.pathname+F.method]=X;if(!X||!X.handler)return new Response(`Route not found for ${G.pathname}`,{status:404});if(X.method!==F.method)return new Response("Method not allowed",{status:405});if(X.isDynamic)F.routePattern=X.path;if(z.hasPreHandlerHook){const I=yield z.hooks.preHandler(J);if(I)return I}try{const I=yield X.handler(J);if(z.hasPostHandlerHook)yield z.hooks.postHandler(J);if(z.hasOnSendHook){const U=yield z.hooks.onSend(I,J);if(U)return U}return I!==null&&I!==void 0?I:new Response("No response from handler",{status:204})}catch(I){return new Response("Internal Server Error",{status:500})}})}function y(F,G){return N(this,void 0,void 0,function*(){for(let z of F){const J=yield z(G);if(J)return J}})}var N=W&&W.__awaiter||function(F,G,z,J){function X(I){return I instanceof z?I:new z(function(U){U(I)})}return new(z||(z=Promise))(function(I,U){function K(E){try{Y(J.next(E))}catch(L){U(L)}}function $(E){try{Y(J.throw(E))}catch(L){U(L)}}function Y(E){E.done?I(E.value):X(E.value).then(K,$)}Y((J=J.apply(F,G||[])).next())})},w=W&&W.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(W,"__esModule",{value:!0});W.default=P;var _=w(D()),Q={}});export default S();
