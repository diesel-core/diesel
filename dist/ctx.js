async function $(G){const F={};if(!G)return F;return G.split(";").forEach((L)=>{const[R,J]=L?.trim()?.split("=");if(R&&J)F[R.trim()]=J.split(" ")[0].trim()}),F}function K(G,F){const z={},L=G.split("/"),[R]=F.split("?"),J=R.split("/");if(L.length!==J.length)return null;return L.forEach((U,Y)=>{if(U.startsWith(":")){const X=U.slice(1);z[X]=J[Y]}}),z}async function W(G){const F=G.headers.get("Content-Type")||"";if(!F)return{};try{if(F.startsWith("application/json"))return await G.json();if(F.startsWith("application/x-www-form-urlencoded")){const z=await G.text();return Object.fromEntries(new URLSearchParams(z))}if(F.startsWith("multipart/form-data")){const z=await G.formData();return O(z)}return{error:"Unknown request body type"}}catch(z){return{error:"Invalid request body format"}}}function O(G){const F={};for(let[z,L]of G.entries())F[z]=L;return F}function _(G,F){let z=new Headers,L={},R=!1,J=null,U=null,Y=null,X,Z=200;return{req:G,url:F,next:()=>{},status(w){return Z=w,this},async body(){if(!X)X=await W(G);if(X.error)return new Response(JSON.stringify({error:X.error}),{status:400});return X},setHeader(w,E){return z.set(w,E),this},set(w,E){return L[w]=E,this},get(w){return L[w]||null},setAuth(w){return R=w,this},getAuth(){return R},text(w,E){return new Response(w,{status:E??Z,headers:z})},json(w,E){return new Response(JSON.stringify(w),{status:E??Z,headers:z})},html(w,E){return new Response(Bun.file(w),{status:E??Z,headers:z})},file(w,E){return new Response(Bun.file(w),{status:E??Z,headers:z})},redirect(w,E){return z.set("Location",w),new Response(null,{status:E??302,headers:z})},getParams(w){if(!Y)Y=K(G?.routePattern,F?.pathname);return w?Y[w]||null:Y},getQuery(w){if(!J)J=Object.fromEntries(F.searchParams);return w?J[w]||null:J},async cookie(w,E,I={}){let M=`${encodeURIComponent(w)}=${encodeURIComponent(E)}`;if(I.maxAge)M+=`; Max-Age=${I.maxAge}`;if(I.expires)M+=`; Expires=${I.expires.toUTCString()}`;if(I.path)M+=`; Path=${I.path}`;if(I.domain)M+=`; Domain=${I.domain}`;if(I.secure)M+="; Secure";if(I.httpOnly)M+="; HttpOnly";if(I.sameSite)M+=`; SameSite=${I.sameSite}`;return z?.append("Set-Cookie",M),this},async getCookie(w){if(!U){const E=G.headers.get("cookie");if(E)U=await $(E)}return w?U[w]||null:U}}}export{_ as default};
