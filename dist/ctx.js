function x(F,L,G){let z=new Headers({"X-Powered-By":"DieselJS","Cache-Control":"no-cache"});z.set("X-Powered-By","DieselJS");let M={},U=!1,J,Y=null,Z,_,$={};return{req:F,server:L,url:G,setHeader(w,E){return z.set(w,E),this},getUser(){return $},setUser(w){if(w)$=w},getIP(){return this.server.requestIP(this.req)},async getBody(){if(!_)_=await R(F);if(_.error)return new Response(JSON.stringify({error:_.error}),{status:400});return _},set(w,E){if(typeof w!=="string")throw new Error("Key must be string type!");if(!E)throw new Error("value paramter is missing pls pass value after key");return M[w]=E,this},get(w){return w?M[w]:null},setAuth(w){return U=w,this},getAuth(){return U},text(w,E){if(!z.has("Content-Type"))z.set("Content-Type","text/plain; charset=utf-8");return new Response(w,{status:E,headers:z})},send(w,E){if(typeof w==="string"){if(!z.has("Content-Type"))z.set("Content-Type","text/plain; charset=utf-8")}else if(typeof w==="object"){if(!z.has("Content-Type"))z.set("Content-Type","application/json; charset=utf-8");w=JSON.stringify(w)}else if(w instanceof Uint8Array||w instanceof ArrayBuffer){if(!z.has("Content-Type"))z.set("Content-Type","application/octet-stream")}return new Response(w,{status:E,headers:z})},json(w,E){if(!z.has("Content-Type"))z.set("Content-Type","application/json; charset=utf-8");return new Response(JSON.stringify(w),{status:E,headers:z})},file(w,E){let I=Bun.file(w).type||"application/octet-stream";if(!z.has("Content-Type"))z.set("Content-Type",I);return new Response(Bun.file(w),{status:E,headers:z})},redirect(w,E){return z.set("Location",w),new Response(null,{status:E??302,headers:z})},setCookie(w,E,I={}){let X=`${encodeURIComponent(w)}=${encodeURIComponent(E)}`;if(I.maxAge)X+=`; Max-Age=${I.maxAge}`;if(I.expires)X+=`; Expires=${I.expires.toUTCString()}`;if(I.path)X+=`; Path=${I.path}`;if(I.domain)X+=`; Domain=${I.domain}`;if(I.secure)X+="; Secure";if(I.httpOnly)X+="; HttpOnly";if(I.sameSite)X+=`; SameSite=${I.sameSite}`;return z?.append("Set-Cookie",X),this},getParams(w){if(!Z&&F?.routePattern)Z=O(F?.routePattern,G?.pathname);if(w)if(Z)return Z[w];else return;if(Z)return w;else return},getQuery(w){try{if(!J)J=Object.fromEntries(G.searchParams);if(w)return J[w]??void 0;return J}catch(E){return}},getCookie(w){if(!Y){let E=F.headers.get("cookie");if(E)Y=K(E);else return}if(!Y)return;if(w)return Y[w]??void 0;else return Y}}}function K(F){let L={},G=F?.split(";");for(let z=0;z<G?.length;z++){let[M,...U]=G[z].trim().split("="),J=U?.join("=").trim();if(M)L[M.trim()]=decodeURIComponent(J)}return L}function O(F,L){let G={},z=F.split("/"),[M]=L.split("?"),U=M.split("/");if(z.length!==U.length)return null;for(let J=0;J<z.length;J++)if(z[J].startsWith(":"))G[z[J].slice(1)]=U[J];return G}async function R(F){let L=F.headers.get("Content-Type");if(!L)return{};try{if(L.startsWith("application/json"))return await F.json();if(L.startsWith("application/x-www-form-urlencoded")){let G=await F.text();return Object.fromEntries(new URLSearchParams(G))}if(L.startsWith("multipart/form-data")){let G=await F.formData(),z={};for(let[M,U]of G.entries())z[M]=U;return z}return{error:"Unknown request body type"}}catch(G){return{error:"Invalid request body format"}}}export{x as default};
