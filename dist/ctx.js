function D(G){switch(G.split(".").pop()?.toLowerCase()){case"js":return"application/javascript";case"css":return"text/css";case"html":return"text/html";case"json":return"application/json";case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";case"svg":return"image/svg+xml";case"gif":return"image/gif";case"woff":return"font/woff";case"woff2":return"font/woff2";default:return"application/octet-stream"}}function _(G,U,J){let E=new Headers({"X-Powered-By":"DieselJS","Cache-Control":"no-cache"});E.set("X-Powered-By","DieselJS");let Z={},$=!1,X,K=null,O,R,w={};return{req:G,server:U,url:J,setHeader(z,F){return E.set(z,F),this},getUser(){return w},setUser(z){if(z)w=z},getIP(){return this.server.requestIP(this.req)},async getBody(){if(!R)R=await V(G);if(R.error)return new Response(JSON.stringify({error:R.error}),{status:400});return R},set(z,F){if(typeof z!=="string")throw new Error("Key must be string type!");if(!F)throw new Error("value paramter is missing pls pass value after key");return Z[z]=F,this},get(z){return z?Z[z]:null},setAuth(z){return $=z,this},getAuth(){return $},text(z,F){if(!E.has("Content-Type"))E.set("Content-Type","text/plain; charset=utf-8");return new Response(z,{status:F,headers:E})},send(z,F){if(typeof z==="string"){if(!E.has("Content-Type"))E.set("Content-Type","text/plain; charset=utf-8")}else if(typeof z==="object"){if(!E.has("Content-Type"))E.set("Content-Type","application/json; charset=utf-8");z=JSON.stringify(z)}else if(z instanceof Uint8Array||z instanceof ArrayBuffer){if(!E.has("Content-Type"))E.set("Content-Type","application/octet-stream")}return new Response(z,{status:F,headers:E})},json(z,F){if(!E.has("Content-Type"))E.set("Content-Type","application/json; charset=utf-8");return new Response(JSON.stringify(z),{status:F,headers:E})},file(z,F=200,L){let Y=D(z),M=Bun.file(z),W=new Headers;if(!W.has("Content-Type"))W.set("Content-Type",L??Y);return new Response(M,{status:F,headers:W})},redirect(z,F){return E.set("Location",z),new Response(null,{status:F??302,headers:E})},setCookie(z,F,L={}){let Y=`${encodeURIComponent(z)}=${encodeURIComponent(F)}`;if(L.maxAge)Y+=`; Max-Age=${L.maxAge}`;if(L.expires)Y+=`; Expires=${L.expires.toUTCString()}`;if(L.path)Y+=`; Path=${L.path}`;if(L.domain)Y+=`; Domain=${L.domain}`;if(L.secure)Y+="; Secure";if(L.httpOnly)Y+="; HttpOnly";if(L.sameSite)Y+=`; SameSite=${L.sameSite}`;return E?.append("Set-Cookie",Y),this},getParams(z){if(!O&&G?.routePattern)O=H(G?.routePattern,J?.pathname);if(z)if(O)return O[z];else return;if(O)return z;else return},getQuery(z){try{if(!X)X=Object.fromEntries(J.searchParams);if(z)return X[z]??void 0;return X}catch(F){return}},getCookie(z){if(!K){let F=G.headers.get("cookie");if(F)K=A(F);else return}if(!K)return;if(z)return K[z]??void 0;else return K}}}function A(G){let U={},J=G?.split(";");for(let E=0;E<J?.length;E++){let[Z,...$]=J[E].trim().split("="),X=$?.join("=").trim();if(Z)U[Z.trim()]=decodeURIComponent(X)}return U}function H(G,U){let J={},E=G.split("/"),[Z]=U.split("?"),$=Z.split("/");if(E.length!==$.length)return null;for(let X=0;X<E.length;X++)if(E[X].startsWith(":"))J[E[X].slice(1)]=$[X];return J}async function V(G){let U=G.headers.get("Content-Type");if(!U)return{};try{if(U.startsWith("application/json"))return await G.json();if(U.startsWith("application/x-www-form-urlencoded")){let J=await G.text();return Object.fromEntries(new URLSearchParams(J))}if(U.startsWith("multipart/form-data")){let J=await G.formData(),E={};for(let[Z,$]of J.entries())E[Z]=$;return E}return{error:"Unknown request body type"}}catch(J){return{error:"Invalid request body format"}}}export{_ as default};
