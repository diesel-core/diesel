var R=Object.create;var{getPrototypeOf:B,defineProperty:A,getOwnPropertyNames:E}=Object;var C=Object.prototype.hasOwnProperty;var V=(F,Y,w)=>{w=F!=null?R(B(F)):{};let J=Y||!F||!F.__esModule?A(w,"default",{value:F,enumerable:!0}):w;for(let z of E(F))if(!C.call(J,z))A(J,z,{get:()=>F[z],enumerable:!0});return J};var N=(F,Y)=>()=>(Y||F((Y={exports:{}}).exports,Y),Y.exports);var H=N((f)=>{Object.defineProperty(f,"__esModule",{value:!0});f.parse=q;f.serialize=S;var j=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,P=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,b=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,v=/^[\u0020-\u003A\u003D-\u007E]*$/,I=Object.prototype.toString,g=(()=>{let F=function(){};return F.prototype=Object.create(null),F})();function q(F,Y){let w=new g,J=F.length;if(J<2)return w;let z=Y?.decode||h,X=0;do{let $=F.indexOf("=",X);if($===-1)break;let M=F.indexOf(";",X),L=M===-1?J:M;if($>L){X=F.lastIndexOf(";",$-1)+1;continue}let U=D(F,X,$),W=T(F,$,U),_=F.slice(U,W);if(w[_]===void 0){let G=D(F,$+1,L),Z=T(F,L,G),K=z(F.slice(G,Z));w[_]=K}X=L+1}while(X<J);return w}function D(F,Y,w){do{let J=F.charCodeAt(Y);if(J!==32&&J!==9)return Y}while(++Y<w);return w}function T(F,Y,w){while(Y>w){let J=F.charCodeAt(--Y);if(J!==32&&J!==9)return Y+1}return w}function S(F,Y,w){let J=w?.encode||encodeURIComponent;if(!j.test(F))throw new TypeError(`argument name is invalid: ${F}`);let z=J(Y);if(!P.test(z))throw new TypeError(`argument val is invalid: ${Y}`);let X=F+"="+z;if(!w)return X;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);X+="; Max-Age="+w.maxAge}if(w.domain){if(!b.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);X+="; Domain="+w.domain}if(w.path){if(!v.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);X+="; Path="+w.path}if(w.expires){if(!y(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);X+="; Expires="+w.expires.toUTCString()}if(w.httpOnly)X+="; HttpOnly";if(w.secure)X+="; Secure";if(w.partitioned)X+="; Partitioned";if(w.priority)switch(typeof w.priority==="string"?w.priority.toLowerCase():w.sameSite){case"low":X+="; Priority=Low";break;case"medium":X+="; Priority=Medium";break;case"high":X+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite==="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":X+="; SameSite=Strict";break;case"lax":X+="; SameSite=Lax";break;case"none":X+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return X}function h(F){if(F.indexOf("%")===-1)return F;try{return decodeURIComponent(F)}catch(Y){return F}}function y(F){return I.call(F)==="[object Date]"}});var Q=V(H(),1);function k(F,Y,w){let J=new Headers,z={},X=!1,$,M=null,L,U,W=200,_={};return{req:F,server:Y,url:w,getUser(){return _},setUser(G){if(G)_=G},status(G){return W=G,this},getIP(){return this.server.requestIP(this.req)},async getBody(){if(!U)U=await x(F);if(U.error)return new Response(JSON.stringify({error:U.error}),{status:400});return U},setHeader(G,Z){return J.set(G,Z),this},set(G,Z){return z[G]=Z,this},get(G){return z[G]||null},setAuth(G){return X=G,this},getAuth(){return X},text(G,Z){return new Response(G,{status:Z??W,headers:J})},send(G,Z){return new Response(G,{status:Z??W,headers:J})},json(G,Z){return new Response(JSON.stringify(G),{status:Z??W,headers:J})},html(G,Z){return new Response(Bun.file(G),{status:Z??W,headers:J})},file(G,Z){return new Response(Bun.file(G),{status:Z??W,headers:J})},redirect(G,Z){return J.set("Location",G),new Response(null,{status:Z??302,headers:J})},setCookie(G,Z,K={}){let O=`${encodeURIComponent(G)}=${encodeURIComponent(Z)}`;if(K.maxAge)O+=`; Max-Age=${K.maxAge}`;if(K.expires)O+=`; Expires=${K.expires.toUTCString()}`;if(K.path)O+=`; Path=${K.path}`;if(K.domain)O+=`; Domain=${K.domain}`;if(K.secure)O+="; Secure";if(K.httpOnly)O+="; HttpOnly";if(K.sameSite)O+=`; SameSite=${K.sameSite}`;return J?.append("Set-Cookie",O),this},getParams(G){if(!L&&F?.routePattern)L=c(F?.routePattern,w?.pathname);return G?L[G]||{}:L},getQuery(G){try{if(!$)$=Object.fromEntries(w.searchParams);return G?$[G]||{}:$}catch(Z){return{}}},getCookie(G){if(!M){let Z=F.headers.get("cookie");if(Z)M=Q.default.parse(Z);else return null}if(!M)return null;if(G)return M[G]??null;else return M}}}function c(F,Y){let w={},J=F.split("/"),[z]=Y.split("?"),X=z.split("/");if(J.length!==X.length)return null;return J.forEach(($,M)=>{if($.startsWith(":")){let L=$.slice(1);w[L]=X[M]}}),w}async function x(F){let Y=F.headers.get("Content-Type")||"";if(!Y)return{};try{if(Y.startsWith("application/json"))return await F.json();if(Y.startsWith("application/x-www-form-urlencoded")){let w=await F.text();return Object.fromEntries(new URLSearchParams(w))}if(Y.startsWith("multipart/form-data")){let w=await F.formData(),J={};for(let[z,X]of w.entries())J[z]=X;return J}return{error:"Unknown request body type"}}catch(w){return{error:"Invalid request body format"}}}export{k as default};
