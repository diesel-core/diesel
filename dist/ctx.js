function K(F,J,G){let E=new Headers,L={},R=!1,U,X=null,Y,_,Z=200,$={};return{req:F,server:J,url:G,getUser(){return $},setUser(w){if(w)$=w},status(w){return Z=w,this},getIP(){return this.server.requestIP(this.req)},async getBody(){if(!_)_=await D(F);if(_.error)return new Response(JSON.stringify({error:_.error}),{status:400});return _},setHeader(w,z){return E.set(w,z),this},set(w,z){return L[w]=z,this},get(w){return L[w]||null},setAuth(w){return R=w,this},getAuth(){return R},text(w,z){return new Response(w,{status:z??Z,headers:E})},send(w,z){return new Response(w,{status:z??Z,headers:E})},json(w,z){return new Response(JSON.stringify(w),{status:z??Z,headers:E})},html(w,z){return new Response(Bun.file(w),{status:z??Z,headers:E})},file(w,z){return new Response(Bun.file(w),{status:z??Z,headers:E})},redirect(w,z){return E.set("Location",w),new Response(null,{status:z??302,headers:E})},setCookie(w,z,I={}){let M=`${encodeURIComponent(w)}=${encodeURIComponent(z)}`;if(I.maxAge)M+=`; Max-Age=${I.maxAge}`;if(I.expires)M+=`; Expires=${I.expires.toUTCString()}`;if(I.path)M+=`; Path=${I.path}`;if(I.domain)M+=`; Domain=${I.domain}`;if(I.secure)M+="; Secure";if(I.httpOnly)M+="; HttpOnly";if(I.sameSite)M+=`; SameSite=${I.sameSite}`;return E?.append("Set-Cookie",M),this},getParams(w){if(!Y&&F?.routePattern)Y=W(F?.routePattern,G?.pathname);return w?Y[w]||{}:Y},getQuery(w){try{if(!U)U=Object.fromEntries(G.searchParams);return w?U[w]||{}:U}catch(z){return{}}},getCookie(w){if(!X){let z=F.headers.get("cookie");if(z)X=O(z);else return null}if(!X)return null;if(w)return X[w]??null;else return X}}}function O(F){let J={};return F?.split(";")?.forEach((G)=>{let[E,L]=G?.trim()?.split("=");if(E)J[E.trim()]=L?.split(" ")[0]?.trim()}),J}function W(F,J){let G={},E=F.split("/"),[L]=J.split("?"),R=L.split("/");if(E.length!==R.length)return null;return E.forEach((U,X)=>{if(U.startsWith(":")){let Y=U.slice(1);G[Y]=R[X]}}),G}async function D(F){let J=F.headers.get("Content-Type")||"";if(!J)return{};try{if(J.startsWith("application/json"))return await F.json();if(J.startsWith("application/x-www-form-urlencoded")){let G=await F.text();return Object.fromEntries(new URLSearchParams(G))}if(J.startsWith("multipart/form-data")){let G=await F.formData(),E={};for(let[L,R]of G.entries())E[L]=R;return E}return{error:"Unknown request body type"}}catch(G){return{error:"Invalid request body format"}}}export{K as default};
