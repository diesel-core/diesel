var w=function(I,J,G,F){function Y(U){return U instanceof G?U:new G(function(L){L(U)})}return new(G||(G=Promise))(function(U,L){function X(M){try{Z(F.next(M))}catch(W){L(W)}}function $(M){try{Z(F.throw(M))}catch(W){L(W)}}function Z(M){M.done?U(M.value):Y(M.value).then(X,$)}Z((F=F.apply(I,J||[])).next())})};function O(I,J,G){let F=new Headers,Y={},U=!1,L,X=null,$,Z,M=200,W={};return{req:I,server:J,url:G,getUser(){return W},setUser(z){if(z)W=z},set setStatus(z){M=z},status(z){return M=z,this},getIP(){return this.server.requestIP(this.req)},body(){return w(this,void 0,void 0,function*(){if(!Z)Z=yield V(I);if(Z.error)return new Response(JSON.stringify({error:Z.error}),{status:400});return Z})},setHeader(z,E){return F.set(z,E),this},set(z,E){return Y[z]=E,this},get(z){return Y[z]||null},setAuth(z){return U=z,this},getAuth(){return U},text(z,E){return new Response(z,{status:E!==null&&E!==void 0?E:M,headers:F})},send(z,E){return new Response(z,{status:E!==null&&E!==void 0?E:M,headers:F})},json(z,E){return new Response(JSON.stringify(z),{status:E!==null&&E!==void 0?E:M,headers:F})},html(z,E){return new Response(Bun.file(z),{status:E!==null&&E!==void 0?E:M,headers:F})},file(z,E){return new Response(Bun.file(z),{status:E!==null&&E!==void 0?E:M,headers:F})},redirect(z,E){return F.set("Location",z),new Response(null,{status:E!==null&&E!==void 0?E:302,headers:F})},getParams(z){if(!$)$=x(I===null||I===void 0?void 0:I.routePattern,G===null||G===void 0?void 0:G.pathname);return z?$[z]||{}:$},getQuery(z){try{if(!L)L=Object.fromEntries(G.searchParams);return z?L[z]||{}:L}catch(E){return{}}},cookie(z,E,R={}){let K=`${encodeURIComponent(z)}=${encodeURIComponent(E)}`;if(R.maxAge)K+=`; Max-Age=${R.maxAge}`;if(R.expires)K+=`; Expires=${R.expires.toUTCString()}`;if(R.path)K+=`; Path=${R.path}`;if(R.domain)K+=`; Domain=${R.domain}`;if(R.secure)K+="; Secure";if(R.httpOnly)K+="; HttpOnly";if(R.sameSite)K+=`; SameSite=${R.sameSite}`;return F===null||F===void 0||F.append("Set-Cookie",K),this},getCookie(z){var E;if(!X||Object.keys(X).length===0){let R=(E=I.headers)===null||E===void 0?void 0:E.get("cookie");if(R)X=H(R);else return null}if(!X)return null;return z?X[z]!==void 0?X[z]:null:X}}}function H(I){let J={};if(!I)return J;return I.split(";").forEach((F)=>{var Y;let[U,L]=(Y=F===null||F===void 0?void 0:F.trim())===null||Y===void 0?void 0:Y.split("=");if(U&&L)J[U.trim()]=L.split(" ")[0].trim()}),J}function x(I,J){let G={},F=I.split("/"),[Y]=J.split("?"),U=Y.split("/");if(F.length!==U.length)return null;return F.forEach((L,X)=>{if(L.startsWith(":")){let $=L.slice(1);G[$]=U[X]}}),G}function V(I){return w(this,void 0,void 0,function*(){let J=I.headers.get("Content-Type")||"";if(!J)return{};try{if(J.startsWith("application/json"))return yield I.json();if(J.startsWith("application/x-www-form-urlencoded")){let G=yield I.text();return Object.fromEntries(new URLSearchParams(G))}if(J.startsWith("multipart/form-data")){let G=yield I.formData();return A(G)}return{error:"Unknown request body type"}}catch(G){return{error:"Invalid request body format"}}})}function A(I){let J={};for(let[G,F]of I.entries())J[G]=F;return J}export{O as default};
