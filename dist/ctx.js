var w=(I,F)=>()=>(F||I((F={exports:{}}).exports,F),F.exports);var B=w((W)=>{function A(I,F){let E={},J={},X=!1,L=null,M=null,$=null,Y,R=200;return{req:I,url:F,next:()=>{},status(z){return R=z,this},body(){return K(this,void 0,void 0,function*(){if(!Y)Y=yield T(I);if(Y.error)return new Response(JSON.stringify({error:Y.error}),{status:400,headers:{"Content-Type":"application/json"}});return Y})},setHeader(z,G){return E[z]=G,this},set(z,G){return J[z]=G,this},get(z){return J[z]||null},setAuth(z){return X=z,this},getAuth(){return X},text(z,G){if(G)R=G;return new Response(z,{status:R,headers:E})},json(z,G){if(G)R=G;return new Response(JSON.stringify(z),{status:R,headers:Object.assign({"Content-Type":"application/json"},E)})},html(z,G){if(G)R=G;return new Response(Bun.file(z),{status:R,headers:Object.assign({},E)})},file(z,G){if(G)R=G;return new Response(Bun.file(z),{status:R,headers:Object.assign({},E)})},redirect(z,G){if(G)R=G;return new Response(null,{status:R,headers:Object.assign({Location:z},E)})},getParams(z){if(!$)$=Q(I===null||I===void 0?void 0:I.routePattern,F===null||F===void 0?void 0:F.pathname);return z?$[z]||null:$},getQuery(z){if(!L)L=Object.fromEntries(F.searchParams);return z?L[z]||null:L},cookie(z,G){return K(this,arguments,void 0,function*(H,V,U={}){let Z=`${encodeURIComponent(H)}=${encodeURIComponent(V)}`;if(U.maxAge)Z+=`; Max-Age=${U.maxAge}`;if(U.expires)Z+=`; Expires=${U.expires.toUTCString()}`;if(U.path)Z+=`; Path=${U.path}`;if(U.domain)Z+=`; Domain=${U.domain}`;if(U.secure)Z+="; Secure";if(U.httpOnly)Z+="; HttpOnly";if(U.sameSite)Z+=`; SameSite=${U.sameSite}`;if(E["Set-Cookie"]){const O=Array.isArray(E["Set-Cookie"])?E["Set-Cookie"]:[E["Set-Cookie"]];O.push(Z),E["Set-Cookie"]=O}else E["Set-Cookie"]=Z;return this})},getCookie(z){return K(this,void 0,void 0,function*(){if(!M){const G=I.headers.get("cookie");if(G)M=yield D(G)}return z?M[z]||null:M})}}}function D(I){return K(this,void 0,void 0,function*(){const F={};if(!I)return F;return I.split(";").forEach((J)=>{var X;const[L,M]=(X=J===null||J===void 0?void 0:J.trim())===null||X===void 0?void 0:X.split("=");if(L&&M)F[L.trim()]=M.split(" ")[0].trim()}),F})}function Q(I,F){const E={},J=I.split("/"),[X]=F.split("?"),L=X.split("/");if(J.length!==L.length)return null;return J.forEach((M,$)=>{if(M.startsWith(":")){const Y=M.slice(1);E[Y]=L[$]}}),E}function T(I){return K(this,void 0,void 0,function*(){const F=I.headers.get("Content-Type")||"";if(!F)return{};try{if(F.startsWith("application/json"))return yield I.json();if(F.startsWith("application/x-www-form-urlencoded")){const E=yield I.text();return Object.fromEntries(new URLSearchParams(E))}if(F.startsWith("multipart/form-data")){const E=yield I.formData();return b(E)}return{error:"Unknown request body type"}}catch(E){return{error:"Invalid request body format"}}})}function b(I){const F={};for(let[E,J]of I.entries())F[E]=J;return F}var K=W&&W.__awaiter||function(I,F,E,J){function X(L){return L instanceof E?L:new E(function(M){M(L)})}return new(E||(E=Promise))(function(L,M){function $(z){try{R(J.next(z))}catch(G){M(G)}}function Y(z){try{R(J.throw(z))}catch(G){M(G)}}function R(z){z.done?L(z.value):X(z.value).then($,Y)}R((J=J.apply(I,F||[])).next())})};Object.defineProperty(W,"__esModule",{value:!0});W.default=A});export default B();
