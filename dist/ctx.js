async function E(I){const G={};if(!I)return G;return I.split(";").forEach((M)=>{const[U,L]=M?.trim()?.split("=");if(U&&L)G[U.trim()]=L.split(" ")[0].trim()}),G}function K(I,G){const z={},M=I.split("/"),[U]=G.split("?"),L=U.split("/");if(M.length!==L.length)return null;return M.forEach((X,Z)=>{if(X.startsWith(":")){const Y=X.slice(1);z[Y]=L[Z]}}),z}async function W(I){const G=I.headers.get("Content-Type")||"";if(!G)return{};try{if(G.startsWith("application/json"))return await I.json();if(G.startsWith("application/x-www-form-urlencoded")){const z=await I.text();return Object.fromEntries(new URLSearchParams(z))}if(G.startsWith("multipart/form-data")){const z=await I.formData();return A(z)}return{error:"Unknown request body type"}}catch(z){return{error:"Invalid request body format"}}}function A(I){const G={};for(let[z,M]of I.entries())G[z]=M;return G}function $(I,G){let z=new Headers,M={},U=!1,L=null,X=null,Z=null,Y,_=200;return{req:I,url:G,next:()=>{},status(w){return _=w,this},async body(){if(!Y)Y=await W(I);if(Y.error)return new Response(JSON.stringify({error:Y.error}),{status:400});return Y},setHeader(w,F){return z.set(w,F),this},set(w,F){return M[w]=F,this},get(w){return M[w]||null},setAuth(w){return U=w,this},getAuth(){return U},text(w,F){return new Response(w,{status:F??_,headers:z})},json(w,F){return new Response(JSON.stringify(w),{status:F??_,headers:z})},html(w,F){return new Response(Bun.file(w),{status:F??_,headers:z})},file(w,F){return new Response(Bun.file(w),{status:F??_,headers:z})},redirect(w,F){return z.set("Location",w),new Response(null,{status:F??302,headers:z})},getParams(w){if(!Z)Z=K(I?.routePattern,G?.pathname);return w?Z[w]||null:Z},getQuery(w){if(!L)L=Object.fromEntries(G.searchParams);return w?L[w]||null:L},async cookie(w,F,J={}){let R=`${encodeURIComponent(w)}=${encodeURIComponent(F)}`;if(J.maxAge)R+=`; Max-Age=${J.maxAge}`;if(J.expires)R+=`; Expires=${J.expires.toUTCString()}`;if(J.path)R+=`; Path=${J.path}`;if(J.domain)R+=`; Domain=${J.domain}`;if(J.secure)R+="; Secure";if(J.httpOnly)R+="; HttpOnly";if(J.sameSite)R+=`; SameSite=${J.sameSite}`;return z?.append("Set-Cookie",R),this},async getCookie(w){if(!X){const F=I.headers.get("cookie");if(F)X=await E(F)}return w?X[w]||null:X}}}export{$ as default};
